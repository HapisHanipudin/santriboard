//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table Users {
  id String [pk]
  email String [unique, not null]
  username String [unique, not null]
  password String [not null]
  type Role [not null, default: 'STUDENT']
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  teacher Teachers
  student Students
  studentId Int [unique]
  family Families
  familyId Int [unique]
  refreshTokens RefreshToken [not null]
}

Table RefreshToken {
  id String [pk]
  token String [unique, not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [not null]
  user Users [not null]
}

Table Teachers {
  id String [pk]
  name String [not null]
  userId String [unique, not null]
  user Users [not null]
  type TeacherRole [not null, default: 'ASATIDZ']
  nik String [unique, not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  notes Notes [not null]
  divisions TeacherDivisions [not null]
  classes TeacherClasses [not null]
}

Table Notes {
  id Int [pk, increment]
  student_id Int [not null]
  teacher_id String [not null]
  notes String
  type Boolean [not null]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [default: `now()`, not null]
  student Students [not null]
  teacher Teachers [not null]
}

Table PlpStudents {
  id Int [pk, increment]
  student_id Int [not null]
  plp_id Int [not null]
  semester_id Int [not null]
  student Students [not null]
  plp Plps [not null]
  semester Semesters [not null]

  indexes {
    (student_id, plp_id, semester_id) [unique]
  }
}

Table Behaviors {
  id Int [pk, increment]
  student_id Int [not null]
  value Int [not null]
  type String
  student Students [not null]
}

Table Plans {
  id Int [pk, increment]
  student_id Int [not null]
  title String [not null]
  created_at DateTime [not null]
  updated_at DateTime [not null]
  plan_details PlanDetails [not null]
  student Students [not null]
}

Table PlanDetails {
  id Int [pk, increment]
  plan_id Int [not null]
  type PlanType [not null]
  content String [not null]
  created_at DateTime [not null]
  updated_at DateTime [not null]
  plan Plans [not null]
}

Table Divisions {
  id String [pk]
  name Field [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  classes Classes [not null]
  teachers TeacherDivisions [not null]
}

Table TeacherDivisions {
  id String [pk]
  teacherId String [not null]
  divisionId String [not null]
  role TeacherRole [not null, default: 'ASATIDZ']
  createdAt DateTime [default: `now()`, not null]
  teacher Teachers [not null]
  division Divisions [not null]

  indexes {
    (teacherId, divisionId) [unique]
  }
}

Table Classes {
  id String [pk]
  name String [not null]
  divisionId String [not null]
  division Divisions [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  teachers TeacherClasses [not null]
  students StudentClasses [not null]
}

Table TeacherClasses {
  id String [pk]
  teacherId String [not null]
  classId String [not null]
  semesterId Int [not null]
  createdAt DateTime [default: `now()`, not null]
  semester Semesters [not null]
  teacher Teachers [not null]
  class Classes [not null]

  indexes {
    (teacherId, classId) [unique]
  }
}

Table Families {
  id Int [pk, increment]
  kk String [unique, not null]
  father_name String [not null]
  mother_name String [not null]
  father_job String
  mother_job String
  children Int [not null]
  address String
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [default: `now()`, not null]
  students Students [not null]
  user Users
}

Table Students {
  id Int [pk, increment]
  familiesId Int
  nik String [unique]
  nis String [unique]
  name String [not null]
  nickname String
  gender Gender
  birth_date DateTime
  birth_place String
  birth_order Int
  school String
  height Int
  weight Int
  photo String
  is_active Boolean [not null]
  is_graduated Boolean [not null]
  created_at DateTime [default: `now()`, not null]
  updated_at DateTime [default: `now()`, not null]
  families Families
  grade_students GradeStudents [not null]
  notes Notes [not null]
  behaviors Behaviors [not null]
  plans Plans [not null]
  plp_students PlpStudents [not null]
  evaluations Evaluations [not null]
  classes StudentClasses [not null]
  user Users
}

Table Grades {
  id Int [pk, increment]
  grade String [not null]
  type String
  grade_students GradeStudents [not null]

  indexes {
    (grade, type) [unique]
  }
}

Table Semesters {
  id Int [pk, increment]
  semester Int [not null]
  period String [not null]
  Teacher_Classes TeacherClasses [not null]
  grade_students GradeStudents [not null]
  plp_students PlpStudents [not null]
  classes_student StudentClasses [not null]

  indexes {
    (semester, period) [unique]
  }
}

Table Plps {
  id Int [pk, increment]
  plp String
  type String
  plp_students PlpStudents [not null]

  indexes {
    (plp, type) [unique]
  }
}

Table GradeStudents {
  id Int [pk, increment]
  student_id Int [not null]
  grade_id Int [not null]
  semester_id Int [not null]
  student Students [not null]
  grade Grades [not null]
  semester Semesters [not null]

  indexes {
    (student_id, grade_id, semester_id) [unique]
  }
}

Table Evaluations {
  id Int [pk, increment]
  field Field [not null]
  score Int [not null]
  studentId Int [not null]
  student Students [not null]
}

Table StudentClasses {
  id String [pk]
  studentId Int [not null]
  classId String [not null]
  semesterId Int [not null]
  createdAt DateTime [default: `now()`, not null]
  semester Semesters [not null]
  student Students [not null]
  class Classes [not null]

  indexes {
    (studentId, classId) [unique]
  }
}

Enum Gender {
  l
  p
}

Enum PlanType {
  timeline
  stepline
  mayor_agenda
  minor_routine
}

Enum Field {
  TAHFIZH
  IT
  KARAKTER
  BAHASA
}

Enum Role {
  ADMIN
  TEACHER
  STUDENT
  FAMILY
}

Enum TeacherRole {
  ASATIDZ
  KADIV
}

Ref: Users.studentId - Students.id

Ref: Users.familyId - Families.id

Ref: RefreshToken.userId > Users.id

Ref: Teachers.userId - Users.id

Ref: Notes.student_id > Students.id

Ref: Notes.teacher_id > Teachers.id

Ref: PlpStudents.student_id > Students.id

Ref: PlpStudents.plp_id > Plps.id

Ref: PlpStudents.semester_id > Semesters.id

Ref: Behaviors.student_id > Students.id

Ref: Plans.student_id > Students.id

Ref: PlanDetails.plan_id > Plans.id

Ref: TeacherDivisions.teacherId > Teachers.id

Ref: TeacherDivisions.divisionId > Divisions.id

Ref: Classes.divisionId > Divisions.id

Ref: TeacherClasses.semesterId > Semesters.id

Ref: TeacherClasses.teacherId > Teachers.id

Ref: TeacherClasses.classId > Classes.id

Ref: Students.familiesId > Families.id

Ref: GradeStudents.student_id > Students.id

Ref: GradeStudents.grade_id > Grades.id

Ref: GradeStudents.semester_id > Semesters.id

Ref: Evaluations.studentId > Students.id

Ref: StudentClasses.semesterId > Semesters.id

Ref: StudentClasses.studentId > Students.id

Ref: StudentClasses.classId > Classes.id